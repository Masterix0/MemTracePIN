# Trace Analysis Tool

This tool analyzes memory access trace files generated by our custom Intel PIN tool.
It calculates the correlation between the time of first access, total accesses, and page table scan (PTS) scoring within specified time windows.
Additionally, it computes the variance of DRAM hit ratios across all intervals, treating them as the entire population of the program execution.

## Table of Contents

- [Requirements](#requirements)
- [Compilation](#compilation)
- [Usage](#usage)
- [Arguments](#arguments)
- [Example](#example)
- [Cleaning Up](#cleaning-up)

## Requirements

- Java Development Kit (JDK) 8 or higher

## Compilation

To compile the project, use the provided `makefile`:

```sh
make
```

## Usage

To run the trace analysis tool, use the following command:

```sh
java -cp bin TraceAnalyzer <workload_name> <real_time_interval_ms> <real_time_run_ms> <tracing_run_ms> <trace_directory> <dram_percentage> <sub_interval_duration_ms>
```

## Arguments

- **`workload_name`**: Name of the workload being analyzed. This will be used to name the output CSV file.
- **`real_time_interval_ms`**: Size of the real-time interval window in milliseconds.
- **`real_time_run_ms`**: Total runtime of the real-time benchmark in milliseconds.
- **`tracing_run_ms`**: Total runtime of the tracing run in milliseconds.
- **`trace_directory`**: Directory where the trace files are located.
- **`dram_percentage`**: Percentage of total memory pages that are assumed to fit in DRAM in each interval.
- **`sub_interval_duration_ms`**: Duration of each sub-interval for page table scan (PTS) scoring in milliseconds.

## Example

```sh
java -cp bin TraceAnalyzer my_workload 3 12 25000 ../MyPinTool/sorted/ 0.3 1
```

This command analyzes the trace with:
- Workload name: `my_workload`
- An interval window of 3 milliseconds
- Real runtime of 12 milliseconds
- Trace runtime of 25000 milliseconds
- Trace files located in `../MyPinTool/sorted/`
- DRAM percentage of 30%
- Sub-interval duration of 1 millisecond

The output CSV file will be named based on the workload name and parameters, following the format: `my_workload-3-1.00-0.30.csv`.

## Variance Calculation

At the end of the analysis, the tool also calculates the overall DRAM hit ratios and the variance across all intervals for each classification type (Actual, Estimated, and PTS).
Since the intervals cover the entire program execution, they are treated as the entire population, and the variance is computed accordingly.

## Cleaning Up

To clean the build artifacts, use:

```sh
make clean
```